<!-- ğŸµ Ğ¤ĞĞĞĞ’ĞĞ¯ ĞœĞ£Ğ—Ğ«ĞšĞ -->
<audio id="bgMusic" loop>
    <source src="nervy_-_slishkom-vlyublen.mp3" type="audio/mpeg">
</audio>

<script>
/* âœï¸ Ğ˜ĞœĞ¯ */
const name = "Ğ¼Ğ°Ğ¹Ñ";

/* ğŸ” Ğ¡Ğ•ĞšĞ Ğ•Ğ¢ĞĞ«Ğ™ ĞšĞ›Ğ®Ğ§ */
const SECRET_KEY = "9f3KxL-love";
const urlKey =
  new URLSearchParams(window.location.search).get("key") ||
  new URLSearchParams(window.location.search).get("startapp");

if (urlKey !== SECRET_KEY) {
  document.body.innerHTML = "<h1 style='text-align:center;margin-top:40vh'>ğŸ’” Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚</h1>";
  throw new Error("No access");
}

/* ğŸµ ĞœĞ£Ğ—Ğ«ĞšĞ */
const music = document.getElementById("bgMusic");

function startMusic() {
    music.volume = 0;
    music.play().catch(() => {});
    let v = 0;
    const fade = setInterval(() => {
        v += 0.02;
        music.volume = Math.min(v, 0.4);
        if (v >= 0.4) clearInterval(fade);
    }, 100);
}

window.addEventListener("load", startMusic);
document.addEventListener("click", startMusic, { once: true });
document.addEventListener("touchstart", startMusic, { once: true });

/* DOM */
const noBtn = document.getElementById('noBtn');
const yesBtn = document.getElementById('yesBtn');
const pleaText = document.getElementById('pleaText');
const gif = document.getElementById('gif');
const question = document.getElementById('question');

question.textContent = `Ğ‘ÑƒĞ´ĞµÑˆÑŒ Ğ»Ğ¸ Ñ‚Ñ‹ Ğ¼Ğ¾ĞµĞ¹ Ğ’Ğ°Ğ»ĞµĞ½Ñ‚Ğ¸Ğ½ĞºĞ¾Ğ¹, ${name}?`;

let noClicks = 0;

/* ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ğ¾Ğµ "Ğ”Ğ°" */
const savedYes = localStorage.getItem('valentineYes');
if (savedYes) showYesScreen(savedYes);

/* Ñ‚ĞµĞºÑÑ‚Ñ‹ Ğ¸ Ğ³Ğ¸Ñ„ĞºĞ¸ */
const pleas = [
    "ĞÑƒ Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ° ğŸ¥º",
    "Ğ¢Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½? ğŸ˜¢",
    "ĞœĞ½Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ³Ñ€ÑƒÑÑ‚Ğ½Ğ¾ ğŸ’”",
    "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ÑˆĞ°Ğ½Ñ... ğŸ˜­"
];

const sadGifs = [
    "https://media.giphy.com/media/ROF8OQvDmxytW/giphy.gif",
    "https://media.giphy.com/media/ISOckXUybVfQ4/giphy.gif",
    "https://media.giphy.com/media/d2lcHJTG5Tscg/giphy.gif",
    "https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif"
];

/* ĞĞµÑ‚ */
noBtn.addEventListener('click', () => {
    if (navigator.vibrate) navigator.vibrate(50);

    if (noClicks < 4) {
        pleaText.textContent = pleas[noClicks];
        gif.src = sadGifs[noClicks];

        yesBtn.style.transform = `translateX(-120%) scale(${1 + noClicks * 0.4})`;
        noBtn.style.transform = `translateX(20%) scale(${1 - noClicks * 0.2})`;

        noClicks++;
    }

    if (noClicks === 4) {
        yesBtn.style.left = "50%";
        yesBtn.style.transform = "translateX(-50%) scale(2)";
    }
});

/* ÑƒĞ±ĞµĞ³Ğ°ÑÑ‰Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° */
function moveNo() {
    if (noClicks < 4) return;
    noBtn.style.left = Math.random() * (window.innerWidth - 100) + 'px';
    noBtn.style.top = Math.random() * (window.innerHeight - 100) + 'px';
}
noBtn.addEventListener('mouseenter', moveNo);
noBtn.addEventListener('touchstart', moveNo);

/* Ğ”Ğ° */
yesBtn.addEventListener('click', () => {
    const date = new Date().toLocaleString();
    localStorage.setItem('valentineYes', date);
    showYesScreen(date);
});

function showYesScreen(date) {
    question.textContent = 'Ğ¯ Ğ·Ğ½Ğ°Ğ», Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ ÑĞºĞ°Ğ¶ĞµÑˆÑŒ Â«Ğ´Ğ°Â» ğŸ’•';
    pleaText.textContent = `ğŸ’– ${name} ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğ»ÑÑ(Ğ°ÑÑŒ) ${date}`;
    gif.src = "https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif";
    yesBtn.style.display = 'none';
    noBtn.style.display = 'none';
}

/* ÑĞµÑ€Ğ´ĞµÑ‡ĞºĞ¸ */
function createHeart() {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.textContent = 'ğŸ’–';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
    heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
}
setInterval(createHeart, 300);
</script>

